@inherits LayoutComponentBase
@inject AuthenticationStateProvider AuthenticationStateProvider
@using SpiritTime.Frontend.Partials.Toasts
@using SpiritTime.Frontend.Partials.ToastModal
@using ElectronNET.API
@using SpiritTime.Frontend.Infrastructure.ElectronConfig

<BaseOverlay/>

<BlazoredToasts Position="@ToastPosition.BottomRight"
                Timeout="10"
                SuccessClass="success-toast-override"
                SuccessIconClass="oi oi-circle-check"
                ErrorIconClass="oi oi-circle-x"
                WarningIconClass="oi oi-warning"/>


<div class="main">
    <div class="top-row">

        <div class="small-size menu-placeholder"></div>
        <div class="">
            <a class="custom-navbar-brand" href="">
                <img src="/img/icon_120x120.png" asp-append-version="true" alt="SpiritTime Logo" class="logo-small"/>
                <p class="custom-header">SpiritTime</p>
            </a>

        </div>
        <div class="login-nav-menu">
            @if (HybridSupport.IsElectronActive)
            {
                <button class="custom-small-button mr-3" @onclick="@(() => ReloadUi())">
                    <i class="fas fa-sync-alt"></i>
                </button>
            }
            <LoginMenu/>
        </div>
    </div>

    <div class="d-flex ">
        <AuthorizeView>
            <Authorized>
                <div class="sidebar @NavMenuCssClass">
                    <button class="navbar-toggler" @onclick="ToggleNavMenu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <div class="@NavMenuCssClass">
                        <NavMenu/>
                    </div>
                </div>
                <div class="content">
                    @Body
                </div>
            </Authorized>
            <NotAuthorized>
                <div class="content full-width">
                    @Body
                </div>
            </NotAuthorized>
        </AuthorizeView>
    </div>
</div>
<div class="footer">
    <div class="version">@Version</div>
</div>

@code {
    private bool collapseNavMenu = true;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }

}